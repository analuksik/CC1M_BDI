
USE EST_CASOII;

USE EST_CASOII;

-- Inserindo dados nas tabelas

-- Tabela PASSAGEIROS
INSERT INTO PASSAGEIROS (PASSAGEIRO_CPF, PASSAGEIRO_NOME, PASSAGEIRO_TELEFONE, PASSAGEIRO_PAIS, PASSAGEIRO_ESTADO, PASSAGEIRO_CIDADE, PASSAGEIRO_BAIRRO, PASSAGEIRO_RUA, PASSAGEIRO_NUM)
VALUES
('12345888901', 'João Marcio', '(11)91234-5678', 'Brasil', 'SP', 'São Paulo', 'Centro', 'Rua A', 100),
('98792343210', 'Maria Oliveira', '(21)99876-5432', 'Brasil', 'RJ', 'Rio de Janeiro', 'Botafogo', 'Rua B', 200),
('69579246801', 'Carlos Pereira', '(31)98765-4321', 'Brasil', 'MG', 'Belo Horizonte', 'Savassi', 'Rua C', 300),
('234457357900', 'Ana Souza', '(41)96543-2109', 'Brasil', 'PR', 'Curitiba', 'Centro', 'Rua D', 400),
('03520975300', 'Lucas Costa', '(51)93456-7890', 'Brasil', 'RS', 'Porto Alegre', 'Moinhos de Vento', 'Rua E', 500);

-- Tabela AEROPORTOS
INSERT INTO AEROPORTOS (AEROPORTO_COD, AEROPORTO_NOME, AEROPORTO_CIDADE, AEROPORTO_PAIS)
VALUES
('GRU', 'Aeroporto Internacional de São Paulo - Guarulhos', 'São Paulo', 'Brasil'),
('SDU', 'Aeroporto Santos Dumont', 'Rio de Janeiro', 'Brasil'),
('CNF', 'Aeroporto de Belo Horizonte - Confins', 'Belo Horizonte', 'Brasil'),
('CWB', 'Aeroporto Internacional de Curitiba - Afonso Pena', 'Curitiba', 'Brasil'),
('POA', 'Aeroporto Internacional de Porto Alegre - Salgado Filho', 'Porto Alegre', 'Brasil');

-- Tabela AERONAVES
INSERT INTO AERONAVES (AERONAVE_ID, AERONAVE_MODELO, AERONAVE_CAPACIDADE)
VALUES
(1, 'Boeing 737-800', 180),
(2, 'Airbus A320neo', 200),
(3, 'Embraer E175-E2', 90),
(4, 'Boeing 777-300ER', 400),
(5, 'Airbus A350-900XWB', 300);

-- Tabela FUNCIONARIOS
INSERT INTO FUNCIONARIOS (FUNCIONARIO_ID, FUNCIONARIO_NOME, CARGO)
VALUES
(1, 'Ana Souza', 'Piloto'),
(2, 'Lucas Costa', 'Co-piloto'),
(3, 'Carlos Lima', 'Comissário'),
(4, 'Juliana Mendes', 'Engenheira'),
(5, 'Ricardo Almeida', 'Gerente de Operações');

-- Tabela VOOS
INSERT INTO VOOS (VOO_COD, VOO_ORIGEM, VOO_DESTINO, VOO_PARTIDA, VOO_CHEGADA, AERONAVE_ID)
VALUES
(1, 'GRU','SDU','2024-12-01 08:00:00','2024-12-01 09:30:00' , 1),
(2, 'SDU','CNF','2024-12-02 10:00:00','2024-12-02 11:30:00' , 2),
(3, 'GRU','CNF','2024-12-03 12:00:00','2024-12-03 13:30:00' , 3),
(4, 'CWB','POA','2024-12-04 14:00:00','2024-12-04 15:30:00' , 4),
(5, 'POA','GRU','2024-12-05 16:00:00','2024-12-05 17:30:00' , 5);

-- Tabela RESERVAS
INSERT INTO RESERVAS (PASSAGEIRO_CPF, VOO_COD, DATA_RESERVA)
VALUES
('12345678901' ,1,'2024-11-15'),
('98765432100' ,2,'2024-11-16'),
('13579246801' ,3,'2024-11-17');

-- Tabela OPERACOES_VOO
INSERT INTO OPERACOES_VOO (VOO_COD, FUNCIONARIO_ID, FUNCAO)
VALUES
(1 ,1 ,'Piloto'),
(2 ,2 ,'Co-piloto'),
(3 ,3 ,'Comissário');

-- Atualizações nas tabelas

-- Tabela PASSAGEIROS
UPDATE PASSAGEIROS
SET PASSAGEIRO_TELEFONE = '(11)98765-4321'
WHERE PASSAGEIRO_CPF = '12345678901';

UPDATE PASSAGEIROS
SET PASSAGEIRO_CIDADE = 'Niterói'
WHERE PASSAGEIRO_CPF = '98765432100';

-- Tabela AEROPORTOS
UPDATE AEROPORTOS
SET AEROPORTO_NOME = "Aeroporto Internacional de São Paulo"
WHERE AEROPORTO_COD = "GRU";

UPDATE AEROPORTOS
SET AEROPORTO_PAIS = "Brasil"
WHERE AEROPORTO_COD = "CNF";

-- Tabela AERONAVES
UPDATE AERONAVES
SET AERONAVE_CAPACIDADE = 190
WHERE AERONAVE_ID = 1;

UPDATE AERONAVES 
SET AERONAVE_MODELO = "Airbus A321"
WHERE AERONAVE_ID = 2;

-- Tabela FUNCIONARIOS
UPDATE FUNCIONARIOS 
SET CARGO = "Comissário Chefe"
WHERE FUNCIONARIO_ID = 3;

UPDATE FUNCIONARIOS 
SET FUNCIONARIO_NOME = "Ana Paula"
WHERE FUNCIONARIO_ID = 1;

-- Tabela VOOS 
UPDATE VOOS 
SET VOO_PARTIDA = "2024-12-01 09:00:00"
WHERE VOO_COD = 1;

UPDATE VOOS 
SET VOO_DESTINO = "CWB"
WHERE VOO_COD = 3;

-- Deletando dados das tabelas

-- Tabela RESERVAS 
DELETE FROM RESERVAS 
WHERE VOO_COD IN (SELECT VOO_COD FROM VOOS WHERE VOO_DESTINO = "CNF");

-- Tabela PASSAGEIROS 
DELETE FROM PASSAGEIROS 
WHERE PASSAGEIRO_CPF = (SELECT PASSAGEIRO_CPF FROM RESERVAS WHERE VOO_COD IN (SELECT VOO_COD FROM VOOS WHERE VOO_DESTINO = "CNF") LIMIT 1);

-- Tabela OPERACOES_VOO 
DELETE FROM OPERACOES_VOO 
WHERE VOO_COD IN (SELECT VOO_COD FROM VOOS WHERE VOO_DESTINO = "CNF");

-- Tabela VOOS 
DELETE FROM VOOS 
WHERE VOO_DESTINO = "CNF";

-- Tabela AERONAVES 
DELETE FROM AERONAVES 
WHERE AERONAVE_ID = (SELECT MIN(AERONAVE_ID) FROM VOOS WHERE VOO_DESTINO = "CNF");

-- Tabela FUNCIONARIOS 
DELETE FROM FUNCIONARIOS 
WHERE FUNCIONARIO_ID = (SELECT MIN(FUNCIONARIO_ID) FROM OPERACOES_VOO WHERE VOO_COD IN (SELECT VOO_COD FROM VOOS WHERE VOO_DESTINO = "CNF"));
